var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(["./dcf-uuidGen"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(require("./dcf-uuidGen")):e.dcfWidgetNotice=t(e.dcfHelperUuidv4)}(void 0,function(e){function t(e){var t=document.querySelector("main"),i=t.firstElementChild;t.insertBefore(e,i)}function i(e){function t(i){"max-height"===i.propertyName&&(e.classList.add("dcf-d-none"),e.removeEventListener("transitionend",t),document.querySelector("main").focus())}e.addEventListener("transitionend",t),e.classList.add("dcf-notice-fixedBottom--close"),localStorage.setItem(e.id,"closed")}function o(e,t,i,o){var n="true"===t.getAttribute("aria-expanded");n?(t.innerText="Expand",i.classList.add("dcf-notice-title-collapse"),o.classList.add("dcf-notice-message-collapse"),e.id&&localStorage.setItem(e.id,"collapsed")):(t.innerText="Collapse",o.classList.remove("dcf-notice-message-collapse"),i.classList.remove("dcf-notice-title-collapse"),e.id&&localStorage.setItem(e.id,"expanded")),n=new Boolean(!n),t.setAttribute("aria-expanded",n.toString())}function n(t,n){var c=document.createElement("button");if(v.forEach(function(e){return c.classList.add(e)}),n){var r=t.querySelector(".js-notice-title"),d=t.querySelector(".js-notice-message"),s=d.id||e();if(c.innerText="collapse",c.setAttribute("aria-expanded","true"),!r)return void console.error("Your notice is missing a title.");if(!d)return void console.error("Your notice is missing a message.");r.classList.add("dcf-notice-title"),!d.id&&(d.id=s),c.setAttribute("aria-controls",s),d.classList.add("dcf-notice-message"),c.addEventListener("click",function(){o(t,c,r,d)})}else c.innerText="close",c.addEventListener("click",function(){i(t)});t.insertBefore(c,t.firstElementChild)}function c(e,t){e.forEach(function(e){e.isIntersecting&&e.intersectionRatio>0&&e.intersectionRatio>=t.thresholds[0]&&(g.slideInScroll.forEach(function(t){return e.target.classList.add(t)}),h=!0,t.disconnect())})}function r(e){h||(e.matches?(y=!1,s(),b&&b.disconnect()):(y=!0,d(),x&&x.disconnect()))}function d(){f.forEach(function(e){b=new IntersectionObserver(c,E),b.observe(e)})}function s(){f.forEach(function(e){x=new IntersectionObserver(c,S),x.observe(e)})}function a(e){if(!e.initialized){var i=e.dataset.noticeType,c=e.dataset.location,d="true"===e.dataset.animation,s="true"===e.dataset.collapsible;if(m[i]?m[i].forEach(function(t){return e.classList.add(t)}):m.notify.forEach(function(t){return e.classList.add(t)}),"fixedBottom"===c)if(u)console.error("Only one fixed to bottom notice may exist on a page");else{if(e.id?e.id="dcf-widget-fixedBottom--"+e.id:console.info("An id attribute needs to be provided for the fixed to bottom notice to function properly with localStorage"),!s&&"closed"===localStorage.getItem(e.id))return void e.classList.add("dcf-d-none");p[c]&&p[c].forEach(function(t){return e.classList.add(t)}),n(e,s),t(e),u=!0}else p[c]?p[c].forEach(function(t){return e.classList.add(t)}):p.current.forEach(function(t){return e.classList.add(t)}),"nav"===c&&t(e);if(d&&("fixedBottom"===c?g.slideUp.forEach(function(t){return e.classList.add(t)}):"IntersectionObserver"in window&&(e.classList.add("hide-animate"),L.addListener(function(){return r(L)}),r(L))),e.initialized=!0,s&&"collapsed"===localStorage.getItem(e.id)){var a=e.querySelector(".js-notice-title"),l=e.querySelector(".js-notice-message"),f=e.querySelector(".js-notice-toggle");if(!a)return void console.error("Your notice is missing a title.");if(!l)return void console.error("Your notice is missing a message.");o(e,f,a,l)}}}var l={},f=document.querySelectorAll('[data-widget="notice"]'),u=!!document.querySelector('[id*="unl-widget-fixedBottom-"]');f=[].slice.call(f);var m={notify:["dcf-notice","unl-notice-notify"],success:["dcf-notice","unl-notice-success"],alert:["dcf-notice","unl-notice--alert"],fatal:["dcf-notice","unl-notice--fatal"]},p={current:["uno"],nav:["foo"],fixedBottom:["bar","dcf-fixed","dcf-notice-fixedBottom","dcf-pin-bottom","dcf-pin-right","dcf-pin-left"],fixedBottomLeft:["zoink"]},g={slideInScroll:["baz"],slideUp:["car"]},v=["dcf-absolute","dcf-pin-top","dcf-pin-right","dcf-mt-3","dcf-mr-3","dcf-btn","dcf-btn-tertiary","js-notice-toggle"],h=!1,y=!1,b=void 0,x=void 0,L=window.matchMedia("(min-width: 480px)"),E={root:null,rootMargin:"0px",threshold:.65},S={root:null,rootMargin:"0px",threshold:.8};return l.initialize=function(){f.forEach(function(e){a(e)})},l.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",c=arguments[4];if(0===e.length)return void console.error("Please provide a notice title");if(0===i.length)return void console.error("Please provide a notice message");var r=document.createElement("div"),d=document.createElement("h2"),s=document.createElement("p"),l=Object.keys(o);if(r.setAttribute("role","alert"),l.forEach(function(e){"id"===e?r.id=o[e]:r.setAttribute("data-"+e,o[e])}),"string"==typeof e&&(d.innerText=e),"string"==typeof i&&(s.innerText=i),d.classList.add("js-notice-title"),s.classList.add("js-notice-message"),r.appendChild(d),r.appendChild(s),"main"===n&&void 0===c)t(r);else{void 0===c&&(c="afterbegin");document.querySelector(n).insertAdjacentElement(c,r)}a(r)},l});
//# sourceMappingURL=dcf-notice.js.map