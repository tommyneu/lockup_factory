!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(t){function e(t,e){return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function n(t){this.parse(t)}function r(t,e){this.feed=t,this.parse(e)}function i(t,e){r.call(this,t,e)}function o(t,e){r.call(this,t,e)}function c(t){this.element=t}function a(t){c.call(this,t)}function s(t){c.call(this,t)}function l(t){this.type="atom",n.call(this,t)}function u(t){this.type="rss",n.call(this,t)}t.fn.rssfeed=function(e,n,r){var i={limit:10,header:!0,titletag:"h4",date:!0,dateformat:"datetime",content:!0,snippet:!0,media:!0,showerror:!0,errormsg:"",linktarget:"_self",linkredirect:"",linkcontent:!1,sort:"",sortasc:!0};return n=t.extend(i,n),this.each(function(i,o){var c=t(o);if(c.hasClass("rssFeed")||c.addClass("rssFeed"),!e)return!1;t.ajax(e,{error:function(){if(n.showerror){var e;e=""!==n.errormsg?n.errormsg:"Could not load feed.",t(o).html('<div class="rssError"><p>'+e+"</p></div>")}},success:function(e){p(o,e,n),t.isFunction(r)&&r(c)}})})},n.prototype={element:null,type:"",version:"",title:"",link:"",description:"",author:"",language:"",updated:"",entries:[],parse:function(t){this.element=t,this.entries=[]}},n.factory=function(e){return t("channel",e).length?new u(e):t("feed",e).length?new l(e):null},r.prototype={element:null,feed:null,title:"",link:"",content:"",get description(){return this.content},get contentSnippet(){return h(this.content)},publishedDate:"",get updated(){return this.publishedDate},id:"",media:[],parse:function(t){this.element=t,this.media=[]}},i.prototype={get title(){return t("title",this.element).eq(0).text()},get link(){return t("link",this.element).eq(0).attr("href")},get content(){return t("summary",this.element).eq(0).text()||t("content",this.element).eq(0).text()},get publishedDate(){return t("published",this.element).eq(0).text()},get updated(){return t("updated",this.element).eq(0).text()||this.published},get id(){return t("id",this.element).eq(0).text()},parse:function(e){var n=this;r.prototype.parse.call(this,e),t("link[rel=enclosure]",e).each(function(){n.media.push(new a(this))})}},i.prototype=e(Object.create(r.prototype),i.prototype),o.prototype={get title(){return t("title",this.element).eq(0).text()},get link(){return t("link",this.element).eq(0).text()},get content(){return t("description",this.element).eq(0).text()},get publishedDate(){return t("pubDate",this.element).eq(0).text()},get id(){return t("guid",this.element).eq(0).text()},parse:function(e){var n=this;r.prototype.parse.call(this,e),t("enclosure",e).each(function(){n.media.push(new s(this))})}},o.prototype=e(Object.create(r.prototype),o.prototype),c.prototype={element:null,get href(){return t(this.element).attr("url")},get type(){return t(this.element).attr("type")},get length(){return t(this.element).attr("length")}},a.prototype={get href(){return t(this.element).attr("href")}},a.prototype=e(Object.create(c.prototype),a.prototype),s.prototype={},s.prototype=e(Object.create(c.prototype),s.prototype),l.prototype={get channel(){return t("feed",this.element).eq(0)},get title(){return t("title",this.channel).eq(0).text()},get link(){return t("link",this.channel).eq(0).attr("href")},get description(){return t("subtitle",this.channel).eq(0).text()},get language(){return this.channel.attr("xml:lang")},get updated(){return t("updated",this.channel).eq(0).text()},get author(){return t("name",this.channel).eq(0).text()},parse:function(e){var r=this;n.prototype.parse.call(this,e),this.version="1.0",t("entry",e).each(function(){r.entries.push(new i(r,this))})}},l.prototype=e(Object.create(n.prototype),l.prototype),u.prototype={get channel(){return t("channel",this.element).eq(0)},get version(){var e=t("rss",this.element);return e.length?e.eq(0).attr("version"):"1.0"},get title(){return t("title",this.channel).eq(0).text()},get link(){return t("link",this.channel).eq(0).text()},get description(){return t("description",this.channel).eq(0).text()},get language(){return t("language",this.channel).eq(0).text()},get updated(){return t("lastBuildDate",this.channel).eq(0).text()},parse:function(e){var r=this;n.prototype.parse.call(this,e),t("item",e).each(function(){r.entries.push(new o(r,this))})}},u.prototype=e(Object.create(n.prototype),u.prototype);var h=function(e){var n,r=t("<div>").html(e),i=r[0].textContent;return i.length>120&&-1!==(n=i.indexOf(" ",120))&&(i=i.substring(0,n)+" ..."),i},p=function(e,r,i){var o=n.factory(r);if(!o.type)return!1;var c,a,s,l=[],u=0,h="",p="odd";for(i.header&&(h+='<div class="rssHeader"><a href="'+o.link+'" title="'+o.description+'">'+o.title+"</a></div>"),h+='<div class="rssBody"><ul>',c=0,a=o.entries.length;c<i.limit&&c<a;c++){u=c,l[u]=[];var b,j=o.entries[c],g="",y=j.link;switch(i.sort){case"title":g=j.title;break;case"date":g=j.publishedDate}if(l[u].sort=g,j.publishedDate){var O=new Date(j.publishedDate);switch(b=O.toLocaleDateString()+" "+O.toLocaleTimeString(),i.dateformat){case"datetime":break;case"date":b=O.toLocaleDateString();break;case"time":b=O.toLocaleTimeString();break;case"timeline":b=m(O);break;default:b=d(O,i.dateformat)}}if(i.linkredirect&&(y=encodeURIComponent(y)),l[u].html="<"+i.titletag+'><a href="'+i.linkredirect+y+'" title="View this feed at '+o.title+'">'+j.title+"</a></"+i.titletag+">",i.date&&b&&(l[u].html+="<div>"+b+"</div>"),i.content&&(s=i.snippet&&j.contentSnippet?j.contentSnippet:j.content,i.linkcontent&&(s='<a href="'+i.linkredirect+y+'" title="View this feed at '+o.title+'">'+s+"</a>"),l[u].html+="<p>"+s+"</p>"),i.media&&j.media.length){l[u].html+='<div class="rssMedia"><div>Media files</div><ul>';for(var v=0,q=j.media.length;v<q;v++){var x=j.media[v].href,w=j.media[v].type,k=j.media[v].length;l[u].html+='<li><a href="'+x+'" title="Download this media">'+x.split("/").pop()+"</a> ("+w+", "+f(k)+")</li>"}l[u].html+="</ul></div>"}}i.sort&&l.sort(function(t,e){var n,r;return i.sortasc?(n=t.sort,r=e.sort):(n=e.sort,r=t.sort),"date"==i.sort?new Date(n)-new Date(r):(n=n.toLowerCase(),r=r.toLowerCase(),n<r?-1:n>r?1:0)}),t.each(l,function(t){h+='<li class="rssRow '+p+'">'+l[t].html+"</li>",p="odd"==p?"even":"odd"}),h+="</ul></div>",t(e).html(h),t("a",e).attr("target",i.linktarget)},f=function(t){if(!(t=parseFloat(t)))return"";var e=["bytes","kb","MB","GB","TB","PB"],n=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(n))).toFixed(2)+" "+e[n]},d=function(t,e){var n=new Date(t);return t=e,t=t.replace("dd",b(n.getDate())),t=t.replace("MMMM",j(n.getMonth())),t=t.replace("MM",b(n.getMonth()+1)),t=t.replace("yyyy",n.getFullYear()),t=t.replace("hh",b(n.getHours())),t=t.replace("mm",b(n.getMinutes())),t=t.replace("ss",b(n.getSeconds()))},b=function(t){return t+="",t.length<2&&(t="0"+t),t},j=function(t){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t]},m=function(t){var e,n,r=new Date,i=new Date(t),o=Math.round((r.getTime()-i.getTime())/1e3);return o<60?"< 1 min":(o<3600?(e=Math.round(o/60)-1,n="min"):o<86400?(e=Math.round(o/3600)-1,n="hour"):o<604800?(e=Math.round(o/86400)-1,n="day"):(e=Math.round(o/604800)-1,n="week"),e>1&&(n+="s"),e+" "+n)}});
//# sourceMappingURL=jquery.zrssfeed.js.map